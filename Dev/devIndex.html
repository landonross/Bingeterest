<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <input type="text" id="ratingInput" placeholder="TV-G TV-PG TV-14 TV-MA">
    <button id="submit">Submit</button>
    <div class="imageDiv">
        <img src="">
    </div>
    <div id="message"></div>
    <div>
        <select id="genraDropDown" style="width: 300px;">
        </select>
    </div>
    <br>
    <p>Raw list of ID and the Name</p>
    <ul id="myList"></ul>

    <div class="card-deck">
        <div class="card">
            <img class="card-img-top" src="" alt="">
            <div class="card-body">
                <h4 class="card-title">Title</h4>
                <p class="card-text">Text</p>
            </div>
        </div>
        <div class="card">
            <img class="card-img-top" src="" alt="">
            <div class="card-body">
                <h4 class="card-title">Title</h4>
                <p class="card-text">Text</p>
            </div>
        </div>
    </div>


    <!-- <script src="http://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
        crossorigin="anonymous"></script> -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script> -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- <script src="JS/jquery.twbsPagination.js"></script> -->

    <script>

        
        //popular 
        var TMDBtvPopqueryURL = "";
        var TMDBresponseTV = "";
        var popTVList = [];
        var TMBpopTV = [];
        //Genre
        var TMDBtvGenrequeryURL = "";
        var TMDBresponseTVg = "";
        var genreList = [];
        var TMDBnameid = [];
    

        //on page load items
        $(document).ready()
        {
            buildGenreQueryTMDB()
            buildTVPopQueryTMDB()


        };


        $("#genraDropDown").on("change", function () {
            //Getting Value
            var selValue = $("#genraDropDown").val();
            //Setting Value
            // $("#").val(selValue);
            console.log("YOU selected value:    " + selValue)
        });

        //function to build the URL used to make the API request for genera ID's and names.
        function buildGenreQueryTMDB() {
            // Set the API key
            var APIKey = "7c2207b398a6d440727425799edd2f6f";

            var queryParams = "&language=en-US&page=1";

            // queryURL query the API
            // movieGenreURL = https://api.themoviedb.org/3/genre/movie/list?api_key=<<api_key>>&language=en-US
            // tvByIDURL = https://api.themoviedb.org/3/tv/{tv_id}?api_key=<<api_key>>&language=en-US
            // TMDBtvqueryURL = "https://api.themoviedb.org/3/tv/TV-14/content_ratings?api_key=7c2207b398a6d440727425799edd2f6f&language=en-US";
            // popularURL = "https://api.themoviedb.org/3/tv/popular?api_key=7c2207b398a6d440727425799edd2f6f&language=en-US&page=1"
            // contentRatingsURL = "https://api.themoviedb.org/3/tv/69050/content_ratings?api_key=7c2207b398a6d440727425799edd2f6f&language=en-US&page=1"
            TMDBtvGenrequeryURL = "https://api.themoviedb.org/3/genre/tv/list?api_key=7c2207b398a6d440727425799edd2f6f" + queryParams;

            // UVURLquery()
            return TMDBtvGenrequeryURL;
        };

        //function to build URL for Popular TV shows
        function buildTVPopQueryTMDB() {
            // Set the API key
            var APIKey = "7c2207b398a6d440727425799edd2f6f";

            var queryParams = "&language=en-US&page=1";

            // queryURL query the API
            // movieGenreURL = https://api.themoviedb.org/3/genre/movie/list?api_key=<<api_key>>&language=en-US
            // tvByIDURL = https://api.themoviedb.org/3/tv/{tv_id}?api_key=<<api_key>>&language=en-US
            // TMDBtvqueryURL = "https://api.themoviedb.org/3/tv/TV-14/content_ratings?api_key=7c2207b398a6d440727425799edd2f6f&language=en-US";
            // popularURL = "https://api.themoviedb.org/3/tv/popular?api_key=7c2207b398a6d440727425799edd2f6f&language=en-US&page=1"
            // contentRatingsURL = "https://api.themoviedb.org/3/tv/69050/content_ratings?api_key=7c2207b398a6d440727425799edd2f6f&language=en-US&page=1"
            TMDBtvPopqueryURL = "https://api.themoviedb.org/3/tv/popular?api_key=7c2207b398a6d440727425799edd2f6f" + queryParams;

            // UVURLquery()
            return TMDBtvPopqueryURL;
        };

        //function to query TMBD genre API
        function genreTVURLquery() {
            $.ajax({
                url: TMDBtvGenrequeryURL,
                data: { "api_key": "7c2207b398a6d440727425799edd2f6f" },
                header: "Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3YzIyMDdiMzk4YTZkNDQwNzI3NDI1Nzk5ZWRkMmY2ZiIsInN1YiI6IjYwMGM2Y2RmYzg2YjNhMDA0MWJmMWU5MiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.dJyUUTkXtbl96uQ3VP8STmbmtCvYBt-RrCuyo2O91og",
                dataType: "json",
                method: "GET",
            }).then(function (TMDBresponseTVg) {
                console.log(TMDBresponseTVg);
                // pushes the response into array genrelist
                var TMBgenre = TMDBresponseTVg.genres
                for (let i = 0; i < TMDBresponseTVg.genres.length; i++) {
                    genreList.push(TMBgenre[i]);

                }

                //create li to view ID and Name for each genre
                for (let i = 0; i < genreList.length; i++) {
                    var TMDBid = genreList[i].id;
                    var TMDBname = genreList[i].name;
                    var idName = TMDBid + ":  " + TMDBname;
                    TMDBnameid.push(idName);
                    $("#myList").append('<li>' + idName + '</li>');
                    //create drop down, id for each, and value for each item in drop down.
                    $("#genraDropDown").append("<option id=dd" + i + " value=" + TMDBid + "></option>")
                }

                //create drop down list of names base don the dd# id created.
                for (let i = 0; i < genreList.length; i++) {
                    var TMDBname = genreList[i].name;
                    $("#dd" + i).text(TMDBname);
                }
            })
        }
        genreTVURLquery();

        //Function to grab and store Popular TV items
        function TVURLquery() {
            $.ajax({
                url: TMDBtvPopqueryURL,
                data: { "api_key": "7c2207b398a6d440727425799edd2f6f" },
                header: "Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3YzIyMDdiMzk4YTZkNDQwNzI3NDI1Nzk5ZWRkMmY2ZiIsInN1YiI6IjYwMGM2Y2RmYzg2YjNhMDA0MWJmMWU5MiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.dJyUUTkXtbl96uQ3VP8STmbmtCvYBt-RrCuyo2O91og",
                dataType: "json",
                method: "GET",
            }).then(function (TMDBresponseTV) {
                console.log(TMDBresponseTV);
                // pushes the response into array genrelist
                var TMBpopTV = TMDBresponseTV.results
                for (let i = 0; i < TMDBresponseTV.results.length; i++) {
                    popTVList.push(TMBpopTV[i]);

                }
            })
        }
        TVURLquery()




    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="http://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

</body>

</html>